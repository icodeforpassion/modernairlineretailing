<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ATPCO Fare Filing: Fares, Rules, Footnotes, Routing, Taxes — Deep-Dive Guide (2025)</title>

  <!-- Primary SEO -->
  <meta name="description" content="Deep, engineer-friendly guide to ATPCO fare filing: fares, rules categories, footnotes, routing vs MPM, Cat 12 vs YQ/YR, construction, HIP, taxes, modernization to Offers & Orders, and real-world pricing workflows with checklists and FAQs." />
  <link rel="canonical" href="https://www.modernairlineretailing.com/blog/2024-02-27-atpco-fare-filing-fares-rules-footnotes-practice.html" />
  <meta name="author" content="Modern Airline Retailing" />
  <meta name="robots" content="index,follow,max-image-preview:large" />

  <!-- Open Graph / Twitter -->
  <meta property="og:title" content="ATPCO Fare Filing: The Deep-Dive Guide" />
  <meta property="og:description" content="Everything engineers and product folks need to ship reliable pricing: fares, rules, footnotes, routing/MPM, surcharges, taxes, HIP, construction, and bridges to Offers & Orders." />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="https://www.modernairlineretailing.com/blog/2024-02-27-atpco-fare-filing-fares-rules-footnotes-practice.html" />
  <meta property="og:image" content="https://www.modernairlineretailing.com/blog/images/atpco-fare-filing-hero.jpg" />
  <meta name="twitter:card" content="summary_large_image" />

  <!-- Bulma for clean, bright UI -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css" />
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin />

  <!-- Article Schema & FAQ Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": "ATPCO Fare Filing: Fares, Rules & Footnotes — Deep-Dive Guide",
    "author": {"@type": "Person", "name": "Modern Airline Retailing"},
    "publisher": {"@type": "Organization", "name": "Modern Airline Retailing"},
    "datePublished": "2024-02-27",
    "dateModified": "2025-10-17",
    "image": "https://www.modernairlineretailing.com/blog/images/atpco-fare-filing-hero.jpg",
    "keywords": [
      "ATPCO", "fare filing", "fare rules", "footnotes", "routing", "MPM", "YQ", "YR", "taxes",
      "airline pricing", "fare construction", "Cat 31", "Cat 33", "Cat 10", "Cat 25", "Cat 35",
      "HIP", "continuous pricing", "Offers & Orders"
    ]
  }
  </script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "What is the difference between YQ/YR and Category 12 surcharges?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "YQ/YR are carrier-imposed surcharges filed in a separate dataset and applied by market/cabin. Category 12 are rule-level surcharges tied to a fare's rule evaluation (e.g., day-of-week, stopover charges). Both are pre-tax but sourced/evaluated differently."
        }
      },
      {
        "@type": "Question",
        "name": "How do footnotes interact with base rules?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Footnotes scope additional rule rows to a fare. Engines merge base rule content with all referenced footnote rows before category evaluation, yielding an effective rule for that fare."
        }
      },
      {
        "@type": "Question",
        "name": "When should I use routing vs MPM?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Routing numbers strictly constrain via points/carriers; MPM validates mileage against a cap. Use the one referenced by the fare. Some markets publish both; follow fare references and apply construction/routing checks accordingly."
        }
      }
    ]
  }
  </script>

  <style>
    :root{
      --brand:#2563eb; /* bright blue */
      --brand-2:#0ea5e9; /* cyan accent */
      --ink:#0b132b; /* text */
      --muted:#4b5563; /* secondary text */
      --bg:#ffffff; /* light */
      --bg-elev:#f8fafc; /* cards */
      --border:#e5e7eb; /* borders */
      --radius:14px;
      --maxw:980px;
    }
    body{background:var(--bg); color:var(--ink);}    
    .container.read{max-width:var(--maxw);}

    /* Progress bar */
    #progress{position:fixed; top:0; left:0; height:4px; width:0; background:linear-gradient(90deg,var(--brand),var(--brand-2)); z-index:9999;}

    .hero.is-info{background:linear-gradient(120deg,#e6f2ff,#f0fbff);} 
    .hero .title{color:#0b132b}
    .hero .subtitle{color:#334155}

    .article-card{background:var(--bg-elev); border:1px solid var(--border); border-radius:var(--radius);}
    .toc{position:sticky; top:90px; max-height:70vh; overflow:auto; border:1px solid var(--border); border-radius:var(--radius); padding:1rem;}
    .toc a{color:#1f2937; text-decoration:none}
    .toc a:hover{text-decoration:underline}
    .tag-badge{background:#e7efff; color:#1e40af; border:1px solid #c7dbff; border-radius:999px; padding:.25rem .6rem; font-size:.75rem; margin-right:.3rem}

    /* Tables */
    table.table th, table.table td{border-color:var(--border)}
    table.table thead{background:#eff6ff}
    table.table tr:nth-child(even) td{background:#fafcff}

    /* Code blocks */
    pre{background:#0f172a; color:#e5e7eb; border-radius:10px; padding:1rem; overflow:auto}
    code{background:#f1f5f9; padding:.2rem .35rem; border-radius:6px}

    /* Utilities */
    .mini{font-size:.9rem; color:var(--muted)}
    .callout{background:#fff8e1; border:1px solid #fde68a; border-radius:var(--radius); padding:1rem}
    .share a{margin-right:.5rem}

    /* Copy button for code */
    .copy-btn{position:absolute; right:10px; top:10px}
    .code-wrap{position:relative}

    /* Footer */
    footer{border-top:1px solid var(--border); background:#f9fafb}
  </style>
  <link rel="stylesheet" href="/assets/site.css"/>
  <link rel="stylesheet" href="/assets/post.css"/>
</head>
<body>
  <header class="site-header"></header>
  <main class="page-content">
  <div id="progress" aria-hidden="true"></div>

  <!-- NAV / Breadcrumb -->
  <nav class="navbar is-white" role="navigation" aria-label="main navigation">
    <div class="container">
      <div class="navbar-brand">
        <a class="navbar-item" href="/index.html" aria-label="Home">
          <strong>Modern Airline Retailing</strong>
        </a>
        <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navMenu">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>
      <div id="navMenu" class="navbar-menu">
        <div class="navbar-start">
          <a class="navbar-item" href="/blog/index.html">Blog</a>
          <a class="navbar-item" href="/tools/index.html">Tools</a>
          <a class="navbar-item" href="/about.html">About</a>
        </div>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <section class="hero is-info is-medium">
    <div class="hero-body">
      <div class="container">
        <div class="columns is-vcentered">
          <div class="column is-7">
            <p class="tag-badge">Pricing</p>
            <p class="tag-badge">ATPCO</p>
            <p class="tag-badge">Implementation</p>
            <h1 class="title is-2">ATPCO Fare Filing: Fares, Rules & Footnotes — The Deep-Dive Guide</h1>
            <p class="subtitle is-5">Everything you need to build reliable pricing today and bridge to Offers & Orders tomorrow.</p>
            <p class="mini">Updated <time datetime="2025-10-17">Oct 17, 2025</time> • <span id="readTime">~18</span> min read • Reviewed for accuracy</p>
          </div>
          <div class="column is-5">
            <!-- Replace the src below with your final hero image path -->
            <figure class="image is-3by2 article-card" style="overflow:hidden">
              <img src="/blog/images/atpco-fare-filing-hero.jpg" alt="Illustration of fare filing data flowing from ATPCO to pricing engines, taxes and ticketing" loading="eager" />
            </figure>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section">
    <div class="container read">
      <div class="columns is-variable is-6">
        <!-- CONTENT -->
        <article class="column is-8 content">

          <p class="mini">Quick jump: <a href="#lifecycle">Lifecycle</a> • <a href="#data-building-blocks">Building blocks</a> • <a href="#rule-categories">Rule categories</a> • <a href="#routing">Routing/MPM</a> • <a href="#surcharges-taxes">Surcharges & taxes</a> • <a href="#pricing-workflow">Workflow</a> • <a href="#monitoring">Monitoring</a> • <a href="#faq">FAQ</a></p>

          <h2 id="why-it-matters">1) Why this still matters</h2>
          <ul>
            <li><strong>Filed ≠ legacy.</strong> Filed data is still the contract many partners rely on. Interline, GDS distribution, settlement and servicing lean on it.</li>
            <li><strong>Policy, not just price.</strong> Advance purchase, eligibility, seasonality, combinability, penalties — the rules express your product.</li>
            <li><strong>Modernization path.</strong> The safest route to dynamic Offers & Orders is a <em>bridge</em> that honors filed semantics with auditable adjustments.</li>
          </ul>

          <h2 id="lifecycle">2) How fare data flows</h2>
          <ol>
            <li><strong>Authoring:</strong> Pricing/RM set base fares, attach rules & footnotes, prep batches.</li>
            <li><strong>ATPCO processing:</strong> Validate, normalize, distribute to subscribers (GDS, pricers, tax engines, data lakes).</li>
            <li><strong>Shopping & pricing:</strong> Itinerary + RBD + rules produce priceable candidates.</li>
            <li><strong>Ticketing & settlement:</strong> Fare basis, endorsements and amounts hit the ticket/EMD and drive reissues, refunds and proration.</li>
          </ol>
          <div class="callout"><strong>Reality check:</strong> Every hop (authoring → ATPCO → cache → seller) can drift from host inventory. Version your datasets and reprice at commit.</div>

          <h2 id="data-building-blocks">3) The core building blocks</h2>
          <ul>
            <li><strong>Fare record:</strong> Market, direction (OW/RT), ccy, tariff, rule #, footnotes, dates, public/private.</li>
            <li><strong>Fare basis code:</strong> Human shorthand; rules provide the meaning.</li>
            <li><strong>Rule number & categories:</strong> Re-usable logic chunks (see table below).</li>
            <li><strong>Footnotes:</strong> Scoped rows merged into the effective rule for a fare.</li>
            <li><strong>RBD mapping:</strong> Required inventory bucket per segment (Y, M, J…).</li>
            <li><strong>Optional Services & Brands:</strong> Standardized ancillaries/brand attributes.</li>
            <li><strong>Construction (Cat 25/35):</strong> Build/transform bases; negotiated/private access.</li>
          </ul>

          <h2 id="rule-categories">4) Rule categories (plain English)</h2>
          <p>Categories are named logic blocks. These are the ones you’ll implement most:</p>
          <table class="table is-fullwidth is-hoverable">
            <thead>
              <tr><th>Cat</th><th>What it’s about</th><th>What to watch for</th></tr>
            </thead>
            <tbody>
              <tr><td>1</td><td>Eligibility</td><td>PAX type, residency, corp ID — fast early filter</td></tr>
              <tr><td>2</td><td>Day/Time</td><td>Local time windows; time zones</td></tr>
              <tr><td>3</td><td>Seasonality</td><td>Travel start windows; normalize to intervals</td></tr>
              <tr><td>4</td><td>Flight Application</td><td>Specific flights/equipment; match schedules</td></tr>
              <tr><td>5</td><td>Advance Purchase</td><td>Book-by timing; evaluate at quote & ticketing</td></tr>
              <tr><td>6</td><td>Minimum Stay</td><td>Sat night or X days</td></tr>
              <tr><td>7</td><td>Maximum Stay</td><td>Return time limits</td></tr>
              <tr><td>8</td><td>Stopovers</td><td>Counts/charges; interacts with Cat 12</td></tr>
              <tr><td>9</td><td>Transfers</td><td>Connection limits; itinerary pruning</td></tr>
              <tr><td>10</td><td>Combinability</td><td>Half-round/end-on-end; multi-fare trips</td></tr>
              <tr><td>12</td><td>Surcharges</td><td>Rule-level fees (not YQ/YR)</td></tr>
              <tr><td>14</td><td>Travel Restrictions</td><td>Blackouts; directional sequences</td></tr>
              <tr><td>15</td><td>Sales Restrictions</td><td>POS/POT; channel gating</td></tr>
              <tr><td>16</td><td>Penalties</td><td>Change/refund conditions (free text if not 31/33)</td></tr>
              <tr><td>17</td><td>HIP/Mileage Exceptions</td><td>Overrides to HIP checks</td></tr>
              <tr><td>31</td><td>Voluntary Changes</td><td>Structured change rules; machine-friendly</td></tr>
              <tr><td>33</td><td>Voluntary Refunds</td><td>Structured refund rules; automation-ready</td></tr>
              <tr><td>25</td><td>Fare by Rule</td><td>Programmatic transforms; discount/markup</td></tr>
              <tr><td>35</td><td>Negotiated</td><td>Private/net with access controls</td></tr>
            </tbody>
          </table>

          <h2 id="footnotes">5) Footnotes, without the mystery</h2>
          <p>Footnotes scope additional rule rows to fares that reference them. Build a compiled rule keyed by <code>hash(ruleNumber + sortedFootnotes)</code> and cache it to avoid re-merging on every quote.</p>

          <h2 id="routing">6) Routing vs MPM (and construction)</h2>
          <ul>
            <li><strong>Routing numbers</strong> define allowed paths (via cities, carriers, sometimes equipment) — think tiny grammars.</li>
            <li><strong>MPM</strong> caps mileage with tolerance for a market. After construction, run HIP/circle-trip to prevent under-collection.</li>
          </ul>

          <h2 id="surcharges-taxes">7) YQ/YR, Cat 12, and taxes</h2>
          <ul>
            <li><strong>YQ/YR:</strong> Carrier-imposed surcharges filed separately, applied by market/cabin.</li>
            <li><strong>Cat 12:</strong> Rule-level surcharges evaluated with the fare (e.g., stopover, DOW).</li>
            <li><strong>Taxes:</strong> Use an authoritative tax engine; keep unrounded audit amounts and obey currency/market rounding.</li>
          </ul>

          <h2 id="pricing-workflow">8) A realistic pricing workflow</h2>
          <div class="code-wrap">
            <button class="button is-small copy-btn" data-copy="#wf">Copy</button>
            <pre id="wf"><code>Input: O&amp;D, dates, pax, cabin, corp codes, itinerary shape

1. Query availability (RBD per segment)
2. Build itinerary candidates (time/connection constraints)
3. Fetch fare candidates by market/cabin/effective/POS
4. Compile rules (base + footnotes) → fast structure
5. Early filters: Cat 2/3/5/15
6. Map itinerary to components; validate routing/MPM
7. Deep checks: Cat 6/7/8/9/10 + HIP/circle
8. Add Cat 12 → YQ/YR → taxes via tax engine
9. Currency + rounding; emit pricing trace with dataset hashes</code></pre>
          </div>

          <h2 id="integrity-checks">9) Keeping prices honest</h2>
          <ul>
            <li><strong>Determinism:</strong> Same dataset + itinerary → same price. Surface rule-set hashes.</li>
            <li><strong>Availability drift:</strong> Reprice at commit; expose quote staleness.</li>
            <li><strong>HIP coverage:</strong> Regression tests for multi-city and construction.</li>
            <li><strong>Tax diffs:</strong> Daily comparisons against the authoritative engine.</li>
          </ul>

          <h2 id="caching-distribution">10) Caching that helps</h2>
          <p>Cache compiled rules and light metadata, not entire priced itineraries. Invalidate by ATPCO deltas and show a staleness metric with each response.</p>

          <h2 id="engineering-patterns">11) Engineering patterns that work</h2>
          <h3>11.1 Normalize your internal model</h3>
          <pre><code>Fare { id, O, D, dir, fareBasis, primaryRBD, tariff, ruleNumber,
       effective, expire, travelStart[], travelEnd[], private, ccy, amount, ptcs[], footnotes[] }

CompiledRule { key, ruleNumber, footnoteSet[], categories{...}, provenance{versions...} }

Availability { segmentKey -&gt; { RBD: seats, updatedAt } }

PricingTrace { itinerarySig, fareComponents[], appliedCats[], surcharges[], taxes[], datasetVersion }
</code></pre>
          <h3>11.2 Evaluation strategy</h3>
          <ul>
            <li><strong>Cheap first:</strong> Cat 2/3/5/15.</li>
            <li><strong>Then shape:</strong> Routing/MPM once itinerary known.</li>
            <li><strong>Then cross-fare:</strong> Combinability, HIP, circles.</li>
            <li><strong>Service late:</strong> Re-evaluate 31/33 at reissue with original snapshot.</li>
          </ul>

          <h2 id="modernization">12) Bridging to Offers & Orders</h2>
          <ul>
            <li><strong>Unified offer schema:</strong> Filed or dynamic, but with clear lineage.</li>
            <li><strong>Explainability:</strong> Store base + delta for continuous pricing.</li>
            <li><strong>Interline reality:</strong> Carry filed attributes until the network moves.</li>
          </ul>

          <h2 id="monitoring">13) What to monitor</h2>
          <ul>
            <li>ATPCO load freshness, delta lag, compile backlog</li>
            <li>Discrepancy sampling: priced vs host</li>
            <li>Category pass/fail distributions</li>
            <li>Stage timings and cache hit ratio</li>
            <li>Servicing automation success vs manual fallback</li>
          </ul>

          <h2 id="checklist">14) Short implementation checklist</h2>
          <ul>
            <li>Map lineage: fare → rule(s) → footnote(s) → compiled categories</li>
            <li>Itinerary signature (airports + flights + date + cabin)</li>
            <li>Hash compiled rules for reproducibility</li>
            <li>Separate cheap filters from routing/HIP/Cat 10 work</li>
            <li>Emit a human+machine pricing trace</li>
            <li>Regression tests: HIP/circles and constructed cases</li>
            <li>Detect availability drift and stale datasets</li>
            <li>Define guardrails for continuous pricing deltas</li>
            <li>Automate tax-engine updates with diffs</li>
          </ul>

          <h2 id="faq">15) FAQs</h2>
          <details>
            <summary><strong>Is Cat 31/33 mandatory if Cat 16 exists?</strong></summary>
            <p>Not mandatory, but Cat 31 (changes) and Cat 33 (refunds) enable automation and reduce ambiguity. If you only file Cat 16 free text, expect more manual handling and customer confusion.</p>
          </details>
          <details>
            <summary><strong>Do I still need HIP if I use continuous pricing?</strong></summary>
            <p>Yes. HIP is a protection against under-collection versus intermediate points. Continuous pricing should anchor to filed ladders and still honor HIP/circle rules.</p>
          </details>
          <details>
            <summary><strong>Where do brand benefits live — rules or Optional Services?</strong></summary>
            <p>Use Branded Fares and Optional Services to define consistent brand attributes (bags, seats, priority). Rules handle purchase/usage constraints; brands/OS handle product content.</p>
          </details>

          <hr />
          <p class="mini">Have a correction or a field tip? <a href="/contact.html">Send a note</a>. We keep this page updated as industry practices evolve.</p>
        </article>

        <!-- TOC / SIDE -->
        <aside class="column is-4">
          <div class="toc" aria-labelledby="toc-title">
            <p id="toc-title" class="has-text-weight-semibold">On this page</p>
            <ul id="tocList"></ul>
            <hr>
            <div class="share">
              <p class="mini">Share</p>
              <a aria-label="Share on X" href="https://twitter.com/intent/tweet?text=ATPCO%20Fare%20Filing%20Deep%20Dive&url=https://www.modernairlineretailing.com/blog/2024-02-27-atpco-fare-filing-fares-rules-footnotes-practice.html">X</a>
              <a aria-label="Share on LinkedIn" href="https://www.linkedin.com/sharing/share-offsite/?url=https://www.modernairlineretailing.com/blog/2024-02-27-atpco-fare-filing-fares-rules-footnotes-practice.html">LinkedIn</a>
              <a aria-label="Copy link" href="#" id="copyLinkBtn">Copy link</a>
            </div>
          </div>
        </aside>
      </div>
    </div>
  </section>

  <footer class="section">
    <div class="container read">
      <p class="mini">© Modern Airline Retailing. Educational content; validate against your licensed ATPCO/IATA documentation and local regulations.</p>
    </div>
  </footer>

  <script>
    // Burger
    (function(){
      const $burger = document.querySelector('.navbar-burger');
      const $menu = document.getElementById('navMenu');
      if($burger && $menu){
        $burger.addEventListener('click', ()=>{
          $burger.classList.toggle('is-active');
          $menu.classList.toggle('is-active');
        });
      }
    })();

    // Scroll progress
    const progress = document.getElementById('progress');
    const docHeight = () => document.documentElement.scrollHeight - window.innerHeight;
    const setProgress = () => {
      const scrolled = window.scrollY || document.documentElement.scrollTop;
      const width = (scrolled / docHeight()) * 100;
      progress.style.width = Math.min(100, Math.max(0, width)) + '%';
    };
    window.addEventListener('scroll', setProgress, {passive:true});
    window.addEventListener('resize', setProgress);
    setProgress();

    // Build TOC from h2/h3
    (function(){
      const headings = document.querySelectorAll('article h2, article h3');
      const list = document.getElementById('tocList');
      headings.forEach(h =>{
        if(!h.id){ h.id = h.textContent.trim().toLowerCase().replace(/[^a-z0-9]+/g,'-'); }
        const li = document.createElement('li');
        if(h.tagName === 'H3'){ li.style.marginLeft = '0.8rem'; li.style.fontSize = '.95rem'; }
        const a = document.createElement('a');
        a.href = '#' + h.id;
        a.textContent = h.textContent;
        li.appendChild(a);
        list.appendChild(li);
      });
    })();

    // Reading time (approx 220 wpm)
    (function(){
      const text = document.querySelector('article').innerText || '';
      const words = text.trim().split(/\s+/).length;
      const minutes = Math.max(5, Math.round(words / 220));
      const el = document.getElementById('readTime');
      if(el) el.textContent = '~' + minutes;
    })();

    // Copy code buttons
    document.querySelectorAll('.copy-btn').forEach(btn =>{
      btn.addEventListener('click', ()=>{
        const sel = btn.getAttribute('data-copy');
        const el = sel ? document.querySelector(sel) : btn.nextElementSibling;
        if(!el) return;
        const text = el.innerText;
        navigator.clipboard.writeText(text).then(()=>{
          btn.textContent = 'Copied!';
          setTimeout(()=> btn.textContent = 'Copy', 1500);
        });
      });
    });

    // Copy page link
    (function(){
      const btn = document.getElementById('copyLinkBtn');
      if(btn){
        btn.addEventListener('click', e =>{
          e.preventDefault();
          navigator.clipboard.writeText(window.location.href).then(()=>{
            btn.textContent = 'Copied';
            setTimeout(()=> btn.textContent = 'Copy link', 1200);
          });
        });
      }
    })();
  </script>
  </main>
  <footer class="site-footer"></footer>
  <script src="/assets/site.js" defer></script>
</body>
</html>
